<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"> <!-- Font Awesome for icons -->
    <title>Book of the Day</title>
    <style>
        /* Custom styles for Dark/Light Mode */
        .dark-mode {
            background-color: #2d2d2d;
            color: white;
        }
        .light-mode {
            background-color: white;
            color: black;
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col min-h-screen light-mode" id="body">

    <!-- Navigation Menu -->
    <nav class="bg-blue-600 text-white p-4 flex justify-between items-center">
        <h1 class="text-2xl font-bold">Book of the Day</h1>
        <ul class="flex space-x-4">
            <li><a href="#" class="hover:text-blue-300" onclick="openModal('aboutModal')">About</a></li>
            <li><a href="#" class="hover:text-blue-300" onclick="openModal('contactModal')">Contact</a></li>
        </ul>
        <!-- Dark/Light Mode Switch -->
        <button id="mode-toggle" class="bg-gray-800 text-white p-2 rounded-lg" onclick="toggleMode()">Toggle Mode</button>
    </nav>

    <!-- Main Content -->
    <div class="flex-grow flex items-center justify-center p-4">
        <div class="bg-white shadow-lg rounded-lg flex flex-col md:flex-row items-center w-full md:w-11/12 lg:w-8/12 xl:w-6/12">
            <img id="book-image" src="images/things-fall-apart.jpg" alt="Book Cover" class="w-full md:w-64 h-auto object-cover rounded-t-lg md:rounded-l-lg md:rounded-tr-none"> <!-- Image occupies full width -->
            <div class="flex-grow p-4 flex flex-col"> <!-- Remove excessive padding -->
                <h2 id="book-title" class="text-2xl font-bold mb-2 text-gray-800">Book Title</h2>
                <p id="book-author" class="text-gray-700"></p>
                <p id="book-country" class="text-gray-700"></p>
                <p id="book-language" class="text-gray-700"></p>
                <p id="book-pages" class="text-gray-700"></p>
                <p id="book-year" class="text-gray-700 mb-4"></p>
                <a id="book-link" href="#" target="_blank" class="block text-center bg-blue-600 text-white rounded-md py-1 px-3 text-sm hover:bg-blue-500 w-32">Read more</a>
                <button onclick="fetchBookOfTheDay()" class="mt-4 bg-blue-600 text-white py-1 px-3 rounded-md hover:bg-blue-500">Refresh</button>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="hidden fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-50 flex justify-center items-center">
        <div class="bg-white p-6 rounded-lg w-1/3">
            <h2 class="text-2xl font-bold">About</h2>
            <p class="mt-2">This is the Book of the Day website. Here, you can explore books from various authors and countries.</p>
            <button onclick="closeModal('aboutModal')" class="mt-4 bg-blue-600 text-white py-1 px-3 rounded-md hover:bg-blue-500">Close</button>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="hidden fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-50 flex justify-center items-center">
        <div class="bg-white p-6 rounded-lg w-1/3">
            <h2 class="text-2xl font-bold">Contact</h2>
            <p class="mt-2">You can reach us at contact@bookoftheday.com</p>
            <button onclick="closeModal('contactModal')" class="mt-4 bg-blue-600 text-white py-1 px-3 rounded-md hover:bg-blue-500">Close</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white text-center p-4">
        <p>Built with <i class="fas fa-heart text-red-500"></i> by Bahae Eddine Â© 2024 | <a href="https://linkedin.com/in/halimbahae/" class="hover:underline">LinkedIn</a></p>
    </footer>

    <script src="script.js"></script>
    <script>
        // Toggle Dark/Light Mode
        function toggleMode() {
            const body = document.getElementById('body');
            if (body.classList.contains('light-mode')) {
                body.classList.remove('light-mode');
                body.classList.add('dark-mode');
            } else {
                body.classList.remove('dark-mode');
                body.classList.add('light-mode');
            }
        }

        // Open Modal
        function openModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }

        // Close Modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        async function fetchBookOfTheDay() {
            try {
                const response = await fetch('book_100.json'); //    
                const books = await response.json();

                if (!Array.isArray(books) || books.length === 0) {
                    throw new Error('No books available');
                }

                const randomIndex = Math.floor(Math.random() * books.length);
                const bookOfTheDay = books[randomIndex];

                displayBook(bookOfTheDay);
            } catch (error) {
                console.error("Error fetching books:", error);
                displayBook({
                    title: "Book Not Found", 
                    author: "N/A", 
                    country: "N/A",
                    language: "N/A",
                    pages: "N/A",
                    year: "N/A",
                    link: "#",
                    imageLink: "images/placeholder.jpg",
                    description: "No book could be fetched today."
                });
            }
        }

        function displayBook(book) {
            const bookTitleElement = document.getElementById('book-title');
            const bookAuthorElement = document.getElementById('book-author');
            const bookCountryElement = document.getElementById('book-country');
            const bookLanguageElement = document.getElementById('book-language');
            const bookPagesElement = document.getElementById('book-pages');
            const bookYearElement = document.getElementById('book-year');
            const bookLinkElement = document.getElementById('book-link');
            const bookImageElement = document.getElementById('book-image');

            // Assign values, trimming whitespace and newline characters from link and imageLink fields
            bookTitleElement.textContent = book.title;
            bookAuthorElement.textContent = `Author: ${book.author}`;
            bookCountryElement.textContent = `Country: ${book.country}`;
            bookLanguageElement.textContent = `Language: ${book.language}`;
            bookPagesElement.textContent = `Pages: ${book.pages}`;
            bookYearElement.textContent = `Year: ${book.year}`;
            
            // Trim newline and whitespace characters for link and image URL
            bookLinkElement.href = book.link.trim();
            bookImageElement.src = book.imageLink.trim();

            bookLinkElement.textContent = "Read more";
        }

        // Fetch the book of the day when the page loads
        document.addEventListener("DOMContentLoaded", fetchBookOfTheDay);
    </script>
</body>
</html>
